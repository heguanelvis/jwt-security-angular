<div class="register-form-container">
  <form [formGroup]="signupForm" (ngSubmit)="onSubmit(signupForm)">
    <div class="form-group">
      <label for="username">Username</label>
      <input
        formControlName="username"
        type="text"
        class="form-control"
        id="username"
        (blur)="checkUsername()"
      />
      <small
        class="form-text text-danger"
        *ngIf="username.dirty && username.errors?.required"
        >Username is required</small
      >
      <small class="form-text text-danger" *ngIf="username.errors?.maxlength"
        >Username must be 64 characters or less</small
      >
      <small class="form-text text-danger" *ngIf="!usernameAvailable"
        >This username is not available</small
      >
    </div>
    <div class="form-group">
      <label for="email">Email</label>
      <input
        formControlName="email"
        type="email"
        class="form-control"
        id="email"
        (blur)="checkEmail()"
      />
      <small
        class="form-text text-danger"
        *ngIf="email.dirty && email.errors?.required"
        >Email is required</small
      >
      <small class="form-text text-danger" *ngIf="email.errors?.email"
        >Email must be valid</small
      >
      <small class="form-text text-danger" *ngIf="!emailAvailable"
        >This email is not available</small
      >
    </div>
    <div class="form-group">
      <label for="confirmEmail">Confirm Email</label>
      <input
        formControlName="confirmEmail"
        type="email"
        class="form-control"
        id="confirmEmail"
      />
      <small
        class="form-text text-danger"
        *ngIf="signupForm.controls['confirmEmail'].dirty && !emailsMatch"
      >
        Emails do not match
      </small>
    </div>
    <div class="form-group">
      <label for="password">Password</label>
      <input
        formControlName="password"
        type="password"
        class="form-control"
        id="password"
      />
      <small
        class="form-text text-danger"
        *ngIf="password.dirty && password.errors?.required"
        >Password is required</small
      >
      <small class="form-text text-danger" *ngIf="password.errors?.minlength"
        >Password must be at least 8 characters</small
      >
    </div>
    <div class="form-group">
      <label for="confirmPassword">Confirm Password</label>
      <input
        formControlName="confirmPassword"
        type="password"
        class="form-control"
        id="confirmPassword"
      />
      <small
        class="text-danger"
        *ngIf="signupForm.controls['confirmPassword'].dirty && !passwordsMatch"
      >
        Passwords do not match
      </small>
    </div>
    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="!signupForm.valid || !emailsMatch || !passwordsMatch"
      [ngStyle]="{'cursor': (!signupForm.valid || !emailsMatch || !passwordsMatch) ? 'not-allowed' : 'pointer'}"
    >
      Register
    </button>
  </form>
</div>
